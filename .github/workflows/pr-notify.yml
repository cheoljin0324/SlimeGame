name: Discord Notify

on:
  push:
    branches: [ main ]
  pull_request:
    types: [opened, reopened, synchronize]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Notify Push
        if: github.event_name == 'push'
        run: |
          curl -H "Content-Type: application/json" \
          -X POST \
          -d "{
                \"username\": \"모모이\",
                \"avatar_url\": \"https://cdn.discordapp.com/attachments/1412750974996709476/1413017152310480988/shop1_191cceba693af3b12fb55ccc65fe28fd.png\",
                \"embeds\": [{
                  \"title\": \"우와아아아앗 새로운 코드잖아!?\",
                  \"description\": \"${{ github.actor }} pushed to ${{ github.ref }}\",
                  \"color\": 5814783
                }]
              }" \
          ${{ secrets.DISCORD_WEBHOOK_URL }}

      - name: Notify Pull Request
        if: github.event_name == 'pull_request'
        run: |
          curl -H "Content-Type: application/json" \
          -X POST \
          -d "{
                \"username\": \"미도리\",
                \"avatar_url\": \"https://cdn.discordapp.com/attachments/1412750974996709476/1413017206522122251/shop1_8ac10c9d3444a56ca90e07cbd1a5155e.png\",
                \"embeds\": [{
                  \"title\": \"코드를 불러오기 합니다. #${{ github.event.pull_request.number }}\",
                  \"description\": \"Opened/updated by ${{ github.actor }}\",
                  \"color\": 16776960
                }]
              }" \
          ${{ secrets.DISCORD_WEBHOOK_URL }}
